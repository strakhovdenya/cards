# üóÇÔ∏è –ú–∏–≥—Ä–∞—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–î–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ —Ç–µ–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, **–∫—Ä–æ–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID `00000000-0000-0000-0000-000000000000`**.

## üìÅ –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. `check-user-data-status.sql` ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (00000...)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ backup —Ç–∞–±–ª–∏—Ü

### 2. `safe-cleanup-user-data-migration.sql` üõ°Ô∏è
**–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- –°–æ–∑–¥–∞–µ—Ç backup —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- –í—ã–ø–æ–ª–Ω—è–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –í–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
- –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ç–∫–∞—Ç—É

### 3. `cleanup-user-data-migration.sql` ‚ö°
**–ü—Ä–æ—Å—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** - –±–µ–∑ backup
- –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è backup
- –¢–æ–ª—å–∫–æ –¥–ª—è —Å–ª—É—á–∞–µ–≤ –∫–æ–≥–¥–∞ backup –Ω–µ –Ω—É–∂–µ–Ω
- –í–∫–ª—é—á–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

## üöÄ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase Dashboard > SQL Editor
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ check-user-data-status.sql
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–≤–∏–¥–∏—Ç–µ —Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase Dashboard > SQL Editor  
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ safe-cleanup-user-data-migration.sql
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã, backup —Å–æ–∑–¥–∞–Ω

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```sql
-- –ü–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ check-user-data-status.sql
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "‚úÖ –ë–∞–∑–∞ —É–∂–µ –æ—á–∏—â–µ–Ω–∞!"

### –®–∞–≥ 4: –û—á–∏—Å—Ç–∫–∞ backup (–ø–æ–∑–∂–µ)
```sql
-- –ö–æ–≥–¥–∞ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
DROP TABLE IF EXISTS backup_cards_before_cleanup;
DROP TABLE IF EXISTS backup_tags_before_cleanup;
DROP TABLE IF EXISTS backup_card_tags_before_cleanup;
```

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ:

```sql
-- 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏
INSERT INTO cards SELECT * FROM backup_cards_before_cleanup;

-- 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–≥–∏  
INSERT INTO tags SELECT * FROM backup_tags_before_cleanup;

-- 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑–∏
INSERT INTO card_tags SELECT * FROM backup_card_tags_before_cleanup;
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### üîí –ß—Ç–æ –ù–ï –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:
- –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `00000000-0000-0000-0000-000000000000`
- –¢–µ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `00000000-0000-0000-0000-000000000000`
- –°–≤—è–∑–∏ –∫–∞—Ä—Ç–æ—á–∫–∏-—Ç–µ–≥–∏ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü, –∏–Ω–¥–µ–∫—Å—ã, –ø–æ–ª–∏—Ç–∏–∫–∏ RLS

### üóëÔ∏è –ß—Ç–æ –ë–£–î–ï–¢ —É–¥–∞–ª–µ–Ω–æ:
- –í–°–ï –∫–∞—Ä—Ç–æ—á–∫–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–°–ï —Ç–µ–≥–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–°–ï —Å–≤—è–∑–∏ –∫–∞—Ä—Ç–æ—á–∫–∏-—Ç–µ–≥–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ú–∏–≥—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è
- Backup –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
- –í–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–î–û –º–∏–≥—Ä–∞—Ü–∏–∏:**
```
–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 5
–ö–∞—Ä—Ç–æ—á–µ–∫ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 150
–¢–µ–≥–æ–≤ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 25
```

**–ü–û–°–õ–ï –º–∏–≥—Ä–∞—Ü–∏–∏:**
```
–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 1  
–ö–∞—Ä—Ç–æ—á–µ–∫ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 0
–¢–µ–≥–æ–≤ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 0
‚úÖ –ë–∞–∑–∞ —É–∂–µ –æ—á–∏—â–µ–Ω–∞!
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Backup —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç"
**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ backup –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—É—é –º–∏–≥—Ä–∞—Ü–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞: "Foreign key constraint violation"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ –∏–¥–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—Å–≤—è–∑–∏ ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∏ ‚Üí —Ç–µ–≥–∏)

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—Ç–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backup —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ —É–±–µ–¥–∏—Ç–µ—Å—å:

1. ‚úÖ `check-user-data-status.sql` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ë–∞–∑–∞ —É–∂–µ –æ—á–∏—â–µ–Ω–∞"
2. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `00000...`
3. ‚úÖ –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—á–∏–Ω–∞—é—Ç —Å —á–∏—Å—Ç–æ–π –±–∞–∑–æ–π
4. ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 1-5 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** PostgreSQL 12+, –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **–û—Ç–∫–∞—Ç:** –í–æ–∑–º–æ–∂–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ backup
- **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ, –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** $(date)  
**–í–µ—Ä—Å–∏—è:** 1.0 