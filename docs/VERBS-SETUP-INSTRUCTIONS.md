# Настройка функциональности глаголов

## 1. Настройка базы данных

### Выполните SQL скрипт в Supabase

1. Откройте Supabase Dashboard
2. Перейдите в SQL Editor
3. Выполните скрипт `verbs-schema.sql`

Этот скрипт создаст:
- Таблицу `verbs` для хранения глаголов
- Индексы для оптимизации запросов
- Политики безопасности (временно разрешены все операции)
- Примерные глаголы для тестирования

## 2. Структура данных

### Таблица verbs
```sql
CREATE TABLE verbs (
  id UUID PRIMARY KEY,
  infinitive TEXT NOT NULL,        -- Инфинитив глагола (например, "arbeiten")
  translation TEXT NOT NULL,       -- Перевод инфинитива
  conjugations JSONB NOT NULL,     -- Массив спряжений
  user_id UUID,                   -- ID пользователя
  learned BOOLEAN DEFAULT FALSE,  -- Статус изучения
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

### Формат спряжений (JSONB)
```json
[
  {
    "person": "ich",
    "form": "brauche", 
    "translation": "я нуждаюсь"
  },
  {
    "person": "du",
    "form": "brauchst",
    "translation": "ты нуждаешься"
  }
  // ... и так далее для всех лиц
]
```

## 3. Функциональность

### Режимы работы:

#### 1. Просмотр глаголов
- Список всех глаголов с возможностью фильтрации
- Добавление новых глаголов
- Редактирование существующих
- Удаление глаголов
- Отметка как изученные/не изученные

#### 2. Тренировка глаголов
- Случайный выбор глагола и лица
- Показ инфинитива и лица
- Возможность показать правильный ответ
- Статистика правильных/неправильных ответов

#### 3. Таблица спряжений
- Отображение полной таблицы спряжения
- Режим тренировки с скрытыми формами
- Клик по строке показывает/скрывает форму

## 4. Навигация

В приложении добавлена навигация:
- В меню пользователя появился пункт "Глаголы"
- Переключение между карточками и глаголами
- Отдельные вкладки для просмотра и тренировки

## 5. API маршруты

Все API маршруты требуют аутентификации и работают только с глаголами текущего пользователя.

### GET /api/verbs
Получение всех глаголов текущего пользователя

### POST /api/verbs
Создание нового глагола для текущего пользователя

### GET /api/verbs/[id]
Получение конкретного глагола (только если принадлежит пользователю)

### PUT /api/verbs/[id]
Обновление глагола (только если принадлежит пользователю)

### DELETE /api/verbs/[id]
Удаление глагола (только если принадлежит пользователю)

### GET /api/verbs/random
Получение случайного глагола для тренировки

### GET /api/verbs/by-learned-status?learned=true|false
Получение глаголов по статусу изучения

### GET /api/verbs/search?q=query
Поиск глаголов по инфинитиву

## 6. Компоненты

### VerbManager
Основной компонент для управления глаголами:
- Список глаголов
- Добавление/редактирование
- Фильтрация по статусу изучения

### VerbTable
Компонент для отображения таблицы спряжения:
- Красивое оформление таблицы
- Режим тренировки с скрытыми формами
- Действия (редактирование, удаление)

### VerbTraining
Компонент для тренировки:
- Случайный выбор глагола и лица
- Показ правильного ответа
- Статистика тренировки

### VerbApp
Главный компонент с вкладками:
- Вкладка "Глаголы" - управление
- Вкладка "Тренировка" - тренировка

## 7. Типы данных

Добавлены новые типы в `src/types/index.ts`:
- `Verb` - основной тип глагола
- `VerbConjugation` - спряжение для конкретного лица
- `VerbFormData` - данные формы
- `CreateVerbRequest` - запрос на создание
- `UpdateVerbRequest` - запрос на обновление

## 8. Сервисы

Создан `src/services/verbService.ts` с функциями:
- `getVerbs()` - получение всех глаголов
- `createVerb()` - создание глагола
- `updateVerb()` - обновление глагола
- `deleteVerb()` - удаление глагола
- `getRandomVerb()` - случайный глагол для тренировки
- `getRandomPerson()` - случайное лицо
- `getConjugationForPerson()` - спряжение для лица

## 9. Тестирование

После настройки вы можете:
1. Добавить несколько глаголов
2. Протестировать тренировку
3. Проверить режим скрытых форм в таблице
4. Убедиться, что все CRUD операции работают

## 10. Дальнейшее развитие

Возможные улучшения:
- Добавление времен глаголов (прошедшее, будущее)
- Группировка глаголов по типам спряжения
- Более сложные режимы тренировки
- Экспорт/импорт глаголов
- Статистика изучения
- Интеграция с существующей системой тегов 