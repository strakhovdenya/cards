# Функционал импорта глаголов

## Обзор

Реализован полный функционал для массового импорта немецких глаголов с их спряжениями, аналогичный функционалу импорта карточек.

## Компоненты

### 1. BulkVerbImport.tsx
Основной компонент для импорта глаголов с интерфейсом пользователя.

**Функции:**
- Парсинг текста в формате глаголов
- Валидация данных
- Предварительный просмотр
- Интеграция с GPT для генерации глаголов
- Копирование промпта для GPT

**Формат ввода:**
```
arbeiten - работать
ich - arbeite - я работаю
du - arbeitest - ты работаешь
er/sie/es - arbeitet - он работает
wir - arbeiten - мы работаем
ihr - arbeitet - вы работаете
sie / Sie - arbeiten - они работают

sein - быть
ich - bin - я есть
du - bist - ты есть
er/sie/es - ist - он есть
wir - sind - мы есть
ihr - seid - вы есть
sie / Sie - sind - они есть
```

### 2. API Endpoint: /api/verbs/bulk
Обработчик для массового создания глаголов.

**Функции:**
- Валидация данных на сервере
- Проверка аутентификации
- Массовая вставка в базу данных
- Обработка ошибок

### 3. Сервис: verbService.ts
Добавлен метод `createBulkVerbs()` для массового импорта.

## Интеграция в интерфейс

### VerbManager.tsx
Добавлена кнопка "Импорт глаголов" в интерфейс управления глаголами.

**Расположение:**
- При отсутствии глаголов: рядом с кнопкой "Добавить первый глагол"
- При наличии глаголов: над списком глаголов

## Промпт для GPT

Создан специальный промпт для генерации глаголов в нужном формате:

```
Ты - эксперт по немецкому языку. Создай список немецких глаголов с их спряжениями в следующем формате:

arbeiten - работать
ich - arbeite - я работаю
du - arbeitest - ты работаешь
er/sie/es - arbeitet - он/она/оно работает
wir - arbeiten - мы работаем
ihr - arbeitet - вы работаете
sie / Sie - arbeiten - они работают

sein - быть
ich - bin - я есть
du - bist - ты есть
er/sie/es - ist - он/она/оно есть
wir - sind - мы есть
ihr - seid - вы есть
sie / Sie - sind - они есть

Переведи следующие русские глаголы на немецкий с полными спряжениями в указанном формате (без пустых строк между глаголами):

[СПИСОК_РУССКИХ_ГЛАГОЛОВ]
```

## Валидация данных

### На клиенте
- Проверка обязательных полей (инфинитив, перевод)
- Валидация форм спряжения (ровно 6 форм)
- Проверка уникальности форм спряжения
- Валидация формата спряжений

### На сервере
- Дополнительная валидация на сервере
- Проверка аутентификации пользователя
- Валидация структуры JSON
- Проверка целостности данных

## Типы данных

### CreateVerbData
```typescript
interface CreateVerbData {
  infinitive: string;
  translation: string;
  conjugations: VerbConjugation[];
}
```

### BulkCreateVerbsRequest
```typescript
interface BulkCreateVerbsRequest {
  verbs: CreateVerbRequest[];
}
```

## Использование

### 1. Через интерфейс
1. Откройте раздел "Глаголы"
2. Нажмите кнопку "Импорт глаголов"
3. Вставьте текст с глаголами или используйте GPT промпт
4. Нажмите "Предварительный просмотр" для проверки
5. Нажмите "Импортировать" для сохранения

### 2. Через GPT
1. Нажмите кнопку "GPT промпт"
2. Скопируйте промпт
3. Отправьте в GPT со списком русских глаголов
4. Скопируйте ответ GPT в поле импорта
5. Выполните импорт

## Обработка ошибок

### Типы ошибок
- **Парсинг**: неверный формат данных
- **Валидация**: отсутствующие или дублирующиеся формы спряжения
- **Сеть**: проблемы с подключением к API
- **Сервер**: ошибки базы данных

### Отображение ошибок
- Список ошибок в диалоге импорта
- Подробные сообщения об ошибках
- Возможность исправления и повторной попытки

## Преимущества

1. **Удобство**: Простой интерфейс для массового импорта
2. **Валидация**: Многоуровневая проверка данных
3. **Интеграция с GPT**: Автоматическая генерация глаголов
4. **Предварительный просмотр**: Проверка перед импортом
5. **Обработка ошибок**: Подробная обратная связь
6. **Производительность**: Массовая вставка в базу данных

## Технические детали

### Парсинг
- Построчный анализ текста
- Распознавание инфинитивов и спряжений
- Валидация структуры данных

### API
- RESTful endpoint для массового создания
- Аутентификация через Supabase
- Валидация на сервере

### База данных
- Массовая вставка через Supabase
- Автоматическое создание UUID
- Установка временных меток

## Примеры использования

### Пример 1: Ручной ввод
```
arbeiten - работать
ich - arbeite - я работаю
du - arbeitest - ты работаешь
er/sie/es - arbeitet - он работает
wir - arbeiten - мы работаем
ihr - arbeitet - вы работаете
sie / Sie - arbeiten - они работают
```

### Пример 2: GPT генерация
1. Отправьте в GPT: "Переведи глаголы: работать, быть, иметь"
2. Получите ответ в нужном формате
3. Скопируйте в интерфейс импорта
4. Выполните импорт

## Заключение

Функционал импорта глаголов полностью интегрирован в приложение и предоставляет удобный способ массового добавления немецких глаголов с их спряжениями. Интеграция с GPT значительно упрощает процесс создания контента для изучения языка. 